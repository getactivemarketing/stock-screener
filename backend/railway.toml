[build]
builder = "nixpacks"

[deploy]
# RUN_MODE env var controls which script runs:
# - "pipeline" (default): runs the screener pipeline
# - "returns": runs the return tracker
startCommand = "if [ \"$RUN_MODE\" = \"returns\" ]; then npm run returns; else npm run pipeline; fi"
restartPolicyType = "never"

# Cron schedule is set per-service via Railway dashboard
# Pipeline: "*/30 14-22 * * 1-5" (every 30 min during market hours)
# Returns: "0 11 * * *" (daily at 6am ET)
[cron]
schedule = "*/30 14-22 * * 1-5"
