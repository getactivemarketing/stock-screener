var Z=Object.defineProperty;var k=t=>{throw TypeError(t)};var $=(t,e,s)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var w=(t,e,s)=>$(t,typeof e!="symbol"?e+"":e,s),N=(t,e,s)=>e.has(t)||k("Cannot "+s);var a=(t,e,s)=>(N(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Y=(t,e,s,r)=>(N(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{z as F,A as q,B as y,C as J,D as x,E as C,i as D,F as K,G as Q,H as V,I as W,y as X,J as j,K as ee,L as te,M as se,O as ae,P as U,Q as re,R as ie,g as O,S as ne,T as fe,U as ce,V as de,W as he,l as ue,X as _e,Y as oe,Z as le,_ as ve,a0 as be,f as ge,b as Se,a1 as me,a2 as Pe,a3 as pe}from"./CJVWN2P9.js";var _,o,u,b,p,A,T;class Ae{constructor(e,s=!0){w(this,"anchor");v(this,_,new Map);v(this,o,new Map);v(this,u,new Map);v(this,b,new Set);v(this,p,!0);v(this,A,()=>{var e=F;if(a(this,_).has(e)){var s=a(this,_).get(e),r=a(this,o).get(s);if(r)q(r),a(this,b).delete(s);else{var c=a(this,u).get(s);c&&(a(this,o).set(s,c.effect),a(this,u).delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),r=c.effect)}for(const[i,f]of a(this,_)){if(a(this,_).delete(i),i===e)break;const n=a(this,u).get(f);n&&(y(n.effect),a(this,u).delete(f))}for(const[i,f]of a(this,o)){if(i===s||a(this,b).has(i))continue;const n=()=>{if(Array.from(a(this,_).values()).includes(i)){var l=document.createDocumentFragment();Q(f,l),l.append(x()),a(this,u).set(i,{effect:f,fragment:l})}else y(f);a(this,b).delete(i),a(this,o).delete(i)};a(this,p)||!r?(a(this,b).add(i),J(f,n,!1)):n()}}});v(this,T,e=>{a(this,_).delete(e);const s=Array.from(a(this,_).values());for(const[r,c]of a(this,u))s.includes(r)||(y(c.effect),a(this,u).delete(r))});this.anchor=e,Y(this,p,s)}ensure(e,s){var r=F,c=V();if(s&&!a(this,o).has(e)&&!a(this,u).has(e))if(c){var i=document.createDocumentFragment(),f=x();i.append(f),a(this,u).set(e,{effect:C(()=>s(f)),fragment:i})}else a(this,o).set(e,C(()=>s(this.anchor)));if(a(this,_).set(r,e),c){for(const[n,d]of a(this,o))n===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[n,d]of a(this,u))n===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(a(this,A)),r.ondiscard(a(this,T))}else D&&(this.anchor=K),a(this,A).call(this)}}_=new WeakMap,o=new WeakMap,u=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,T=new WeakMap;function Ie(t,e,s=!1){D&&X();var r=new Ae(t),c=s?j:0;function i(f,n){if(D){const l=ee(t)===te;if(f===l){var d=se();ae(d),r.anchor=d,U(!1),r.ensure(f,n),U(!0);return}}r.ensure(f,n)}W(()=>{var f=!1;e((n,d=!0)=>{f=!0,i(d,n)}),f||i(!1,null)},c)}let R=!1;function Ee(t){var e=R;try{return R=!1,[t(),R]}finally{R=e}}function ye(t,e,s,r){var M;var c=!ue||(s&_e)!==0,i=(s&oe)!==0,f=(s&pe)!==0,n=r,d=!0,l=()=>(d&&(d=!1,n=f?Se(r):r),n),S;if(i){var z=ve in t||be in t;S=((M=re(t,e))==null?void 0:M.set)??(z&&e in t?h=>t[e]=h:void 0)}var m,L=!1;i?[m,L]=Ee(()=>t[e]):m=t[e],m===void 0&&r!==void 0&&(m=l(),S&&(c&&me(),S(m)));var g;if(c?g=()=>{var h=t[e];return h===void 0?l():(d=!0,h)}:g=()=>{var h=t[e];return h!==void 0&&(n=void 0),h===void 0?n:h},c&&(s&ie)===0)return g;if(S){var G=t.$$legacy;return(function(h,E){return arguments.length>0?((!c||!E||G||L)&&S(E?g():h),h):g()})}var I=!1,P=((s&Pe)!==0?ge:he)(()=>(I=!1,g()));i&&O(P);var H=ce;return(function(h,E){if(arguments.length>0){const B=E?O(P):c&&i?ne(h):h;return fe(P,B),I=!0,n!==void 0&&(n=B),h}return le&&I||(H.f&de)!==0?P.v:O(P)})}export{Ae as B,Ie as i,ye as p};
